<HTML><HEAD><TITLE>Manpage of POPEN</TITLE>
</HEAD><BODY>
<H1>POPEN</H1>
Section: 리눅스 프로그래머 매뉴얼 (3)<BR>Updated: 1998년 4월 7일<BR><A HREF="#index">Index</A>
<BR />
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>이름</H2>

popen, pclose - 프로세스 I/O
<A NAME="lbAC">&nbsp;</A>
<H2>사용법</H2>

<B>#include &lt;<A HREF="file:/usr/include/stdio.h">stdio.h</A>&gt;</B>

<P>
<B>FILE *popen(const char *</B><I>command</I><B>, const char *</B><I>type</I><B>);</B>

<P>
<B>int pclose(FILE *</B><I>stream</I><B>);</B>

<A NAME="lbAD">&nbsp;</A>
<H2>설명</H2>

<B>popen()</B>

함수는 pipe, fork에 의해 생성된 프로세스를 열고 shell을 기동한다.
pipe는 단 방향으로 정의되었기 때문에,
<I>type</I>

인자는 읽기-쓰기가 아니라 둘중 하나만 지정한다.; 결과 스트림은 읽기-전용이거나 쓰기-전용이다.
<P>

<I>command</I>

인자는 shell 명령어 라인이 포함하는 null로 종료된 문자열에 대한 포인터이다.
이 명령어는
<B>-c</B>

플래그를 사용하여
<I>/bin/sh</I>

에 전달된다.; 만일 인자가 있다면, 해석은 shell에 의해 행해진다.
<I>mode</I>

인자는 읽기를 위한 'r'이나 쓰기를 위한 'w'중 하나인 null로 종료된 문자열에 대한 포인터이다.
<P>

<B>popen()</B>

에서 반환 값은 
<B>fclose()</B>보다

<B>pclose()</B>

로 종료되어야 하는 보통 표준 I/O 스트림이다.
그런 스트림에 쓰는것은 명령어의 표준 입력에 쓰는것과 같다;명령어의 표준 출력은 만일 이것이 명령어 자체에 의해 수정되지 않았다면
<B>popen()</B>이

호출하는 프로세스의 것과 같다. 대조적으로, 
``popened'' 스트림에서 읽기는 명령어의 표준 출력을 읽고, 명령어 표준 입력은 
<B>popen</B>을

호출한 프로세스의 것과 같다.
<P>

<B>popen</B>

스트림은 기본적으로 완전 버퍼된다는 점에 주의해라.
<P>

<B>pclose</B>

함수는 종료되는 관련 프로세스를 기다리며 
<B>wait4</B>가

반환하는 것처럼 명령어의 종료 상태를 반환한다.
<A NAME="lbAE">&nbsp;</A>
<H2>반환값</H2>

<B>popen</B>

함수는 만일
<B><A HREF="http://localhost/cgi-bin/man/man2html?2+fork">fork</A></B>(2)

나
<B><A HREF="http://localhost/cgi-bin/man/man2html?2+pipe">pipe</A></B>(2)

호출이 실패하거나 메모리를 할당할수 없다면,
<B>NULL</B>

을 반환한다.
<P>

<B>pclose</B>

함수는






만일
<B>wait4</B>

가 에러를 반환하거나 몇몇 다른 에러가 발견되면 -1을 리턴한다.
<A NAME="lbAF">&nbsp;</A>
<H2>에러</H2>

<B>popen</B>

함수는 만일 메모리 할당이 실패한다면, 
<I>errno</I>

를 설정하지 않는다.
<B>fork()</B> 나 <B>pipe()</B>

에서 실패한다면, 
<I>errno</I>

는 적당히 설정된다.
만일
<I>mode</I>

인자가 무효하고, 이 조건이 발견된다면, 
<I>errno</I>

는
<B>EINVAL</B>로

설정된다.
<P>

만일
<B>pclose()</B>

가 자식 상태를 얻을수 없다면,
<I>errno</I>

는
<B>ECHILD</B>로

설정된다.
<A NAME="lbAG">&nbsp;</A>
<H2>호환</H2>

POSIX.2
<A NAME="lbAH">&nbsp;</A>
<H2>버그</H2>

읽기 위해 열려진 명령어의 표준 입력은 
<B>popen()</B>을

호출하는 프로세스가 가지고 있는 offset을 공유하기 때문에, 만일 원래 프로세스가 버퍼된 읽기를 한다면,
명령어의 입력 위치는 예상될수 없다. 비슷하게 쓰기 위해 열려진 명령어에서의 출력은 원래 프로세스의
것과 섞일수 있다. 뒤의 문제는
<B>popen</B>전에

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+fflush">fflush</A></B>(3)를

호출하여 피할수 있다.
<P>
<P>

shell 실행시 실패는 명령어 실행의 shell실패나 명령어의 종료와 구별되어야 한다.
유일한 힌트는 127 exit 상태이다.
<A NAME="lbAI">&nbsp;</A>
<H2>역사</H2>

<B>popen()</B>

와
<B>pclose()</B>

함수는 Version 7 AT&amp;T UNIX에서 나타났다.
<A NAME="lbAJ">&nbsp;</A>
<H2>관련 항목</H2>

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+fork">fork</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?1+sh">sh</A></B>(1),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+pipe">pipe</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+wait4">wait4</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+fflush">fflush</A></B>(3),

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+fclose">fclose</A></B>(3),

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+fopen">fopen</A></B>(3),

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+stdio">stdio</A></B>(3),

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+system">system</A></B>(3).

<A NAME="lbAK">&nbsp;</A>
<H2>역자</H2>

정강훈 &lt;<A HREF="mailto:skyeyes@soback.kornet.net">skyeyes@soback.kornet.net</A>&gt;, 2001년 4월 9일

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">이름</A><DD>
<DT><A HREF="#lbAC">사용법</A><DD>
<DT><A HREF="#lbAD">설명</A><DD>
<DT><A HREF="#lbAE">반환값</A><DD>
<DT><A HREF="#lbAF">에러</A><DD>
<DT><A HREF="#lbAG">호환</A><DD>
<DT><A HREF="#lbAH">버그</A><DD>
<DT><A HREF="#lbAI">역사</A><DD>
<DT><A HREF="#lbAJ">관련 항목</A><DD>
<DT><A HREF="#lbAK">역자</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 08:07:01 GMT, March 25, 2004
</BODY>
</HTML>
