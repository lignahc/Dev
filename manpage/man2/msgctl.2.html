<HTML><HEAD><TITLE>Manpage of MSGCTL</TITLE>
</HEAD><BODY>
<H1>MSGCTL</H1>
Section: 리눅스 프로그래머 매뉴얼 (2)<BR>Updated: 1993년 11월 1일<BR><A HREF="#index">Index</A>
<BR />
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>이름</H2>

msgctl - 메세지 작동을 제어한다.
<A NAME="lbAC">&nbsp;</A>
<H2>사용법</H2>

<PRE>
<B># include &lt;<A HREF="file:/usr/include/sys/types.h">sys/types.h</A>&gt;</B>
<B># include &lt;<A HREF="file:/usr/include/sys/ipc.h">sys/ipc.h</A>&gt;</B>
<B># include &lt;<A HREF="file:/usr/include/sys/msg.h">sys/msg.h</A>&gt;</B>
</PRE>

<P>
<B>int msgctl ( int </B><I>msqid</I><B>,</B>

<B>int  </B><I>cmd</I><B>,</B>

<B>struct msqid_ds *</B><I>buf</I><B> )</B>

<A NAME="lbAD">&nbsp;</A>
<H2>설명</H2>

이 함수는 식별자
<I>msqid</I>인

메세지 큐를
<I>cmd</I>

에 의해 지정된 작동으로 제어한다.
<I>cmd</I>

의 유효값은 다음과 같다:
<DL COMPACT>
<DT><B>IPC_STAT</B>

<DD>
메세지 큐 데이터 구조를
<I>buf</I>에

의해 지정된 구조체로 복사한다.
사용자는 메세지 큐에 읽기 우선권을 가지고 있어야 한다.
<DT><B>IPC_SET</B>

<DD>
<I>buf</I>가

가리키고 있는 
<B>msqid_ds</B>

구조체의 일부 멤버 값을 메세지 큐 데이터 구조체에 쓰고
<B>msg_ctime</B>

멤버도 갱신한다.
사용자가 제공하고
<I>buf</I>가

가리키고 있는 
<B>struct msqid_ds</B>

에서 고려되어야 할 멤버는 다음과 같다:
<PRE>

<B>        msg_perm.uid
        msg_perm.gid
        msg_perm.mode   </B>/* 하위 9-bits */
        msg_qbytes
</PRE>


<P>
호출 프로세스의 유효(effective) user-ID는 슈퍼 유저나, 생성자 또는
메세지 큐의 소유자 중 하나여야 한다.
슈퍼 유저만이 시스템 파라미터인 
<B>MSGMNB</B>값보다

크게
<B>msg_qbytes</B>를

올릴 수 있다.
<P>
<DT><B>IPC_RMID</B>

<DD>
즉시 메세지 큐를 제거하며 해당 데이터 구조체는 기다리고 있는
모든 읽기 쓰기 프로세스를 깨운다.(에러를 반환하며, 
<B>errno</B>는

<B>EIDRM</B>으로

설정된다.)
호출 프로세스의 유효 사용자 ID는 슈퍼 유자나 생성자 또는 메세지 큐의
소유자 중 하나여야 한다.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>반환값</H2>

성공시, 반환값 
<B>0</B>이며,

그렇지 않으면 에러를 가리키는 
<B>errno</B>

과 함께 
<B>-1</B>

이 반환된다.
<P>
<A NAME="lbAF">&nbsp;</A>
<H2>에러</H2>

실패가 반환될때, 
<B>errno</B>는

다음 값 중 하나로 설정된다.
<DL COMPACT>
<DT><B>EACCES</B>

<DD>
<I>cmd</I>

인자는 
<B>IPC_STAT</B>와

같지만 호출 프로세스는 메세지 큐 
<I>msqid</I>에

대한 읽기 접근 허가권을 가지고 있지 않다.
<DT><B>EFAULT</B>

<DD>
<I>cmd</I>

인자는 
<B>IPC_SET</B>나

<B>IPC_STAT</B>

값을 가지고 있지만 
<I>buf</I>에

의해 지정된 주소로 접근할 수 없다.
<DT><B>EIDRM</B>

<DD>
메세지 큐가 제거 되었다.
<DT><B>EINVAL</B>

<DD>
유효 하지 않은 
<I>cmd</I>나

<I>msqid</I>.

<DT><B>EPERM</B>

<DD>
<I>cmd</I>

인자는 
<B>IPC_SET</B>나

<B>IPC_RMID</B>

값을 가지고 있지만 호출 프로세스의 유효 사용자 ID는 명령을
실행할 충분한 권한을 가지고 있지 않다.
이것은 또한 비 슈퍼-사용자 프로세스가 시스템 파라미터 
<B>MSGMNB</B>에

의해 지정된 값보다 크게
<B>msg_qbytes</B>

값을 증가시키려고 시도하였을 때이다.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>주의</H2>

<B>IPC_INFO</B>,

<B>MSG_STAT</B>

그리고
<B>MSG_INFO</B>는

할당된 자원에 대한 정보를 제공하는 
<B><A HREF="http://localhost/cgi-bin/man/man2html?8+ipcs">ipcs</A></B>(8)

프로그램에 의해 사용된다.
앞으로 이것은 proc 파일 시스템 인터페이스를 위해서 필요에 따라 수정되거나
이동될 수도 있다.
<A NAME="lbAH">&nbsp;</A>
<H2>호환</H2>

SVr4, SVID.  SVID는 EIDRM 에러 조건을 문서화 하지 않았다.
<A NAME="lbAI">&nbsp;</A>
<H2>관련 항목</H2>

<B><A HREF="http://localhost/cgi-bin/man/man2html?5+ipc">ipc</A></B>(5),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+msgget">msgget</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+msgsnd">msgsnd</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+msgrcv">msgrcv</A></B>(2)

<A NAME="lbAJ">&nbsp;</A>
<H2>역자</H2>

정강훈 &lt;<A HREF="mailto:skyeyes@soback.kornet.net">skyeyes@soback.kornet.net</A>&gt;, 2000년 6월 19일
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">이름</A><DD>
<DT><A HREF="#lbAC">사용법</A><DD>
<DT><A HREF="#lbAD">설명</A><DD>
<DT><A HREF="#lbAE">반환값</A><DD>
<DT><A HREF="#lbAF">에러</A><DD>
<DT><A HREF="#lbAG">주의</A><DD>
<DT><A HREF="#lbAH">호환</A><DD>
<DT><A HREF="#lbAI">관련 항목</A><DD>
<DT><A HREF="#lbAJ">역자</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 08:07:01 GMT, March 25, 2004
</BODY>
</HTML>
