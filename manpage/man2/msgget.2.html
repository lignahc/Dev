<HTML><HEAD><TITLE>Manpage of MSGGET</TITLE>
</HEAD><BODY>
<H1>MSGGET</H1>
Section: 리눅스 프로그래머 매뉴얼 (2)<BR>Updated: 1993년 11월 1일<BR><A HREF="#index">Index</A>
<BR />
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>이름</H2>

msgget - 메세지 큐 식별자를 가져온다.
<A NAME="lbAC">&nbsp;</A>
<H2>사용법</H2>

<PRE>
<B># include &lt;<A HREF="file:/usr/include/sys/types.h">sys/types.h</A>&gt;</B>
<B># include &lt;<A HREF="file:/usr/include/sys/ipc.h">sys/ipc.h</A>&gt;</B>
<B># include &lt;<A HREF="file:/usr/include/sys/msg.h">sys/msg.h</A>&gt;</B>
</PRE>

<P>
<B>int msgget ( key_t </B><I>key</I><B>,</B>

<B>int msgflg</B><I> )</I>

<A NAME="lbAD">&nbsp;</A>
<H2>설명</H2>

이 함수는
<I>key</I>

값과 관련된 메세지 큐 식별자를 반환한다.
만일,
<I>key</I>가

<B>IPC_PRIVATE</B>

값을 가지고 있거나 또는
<I>key</I>가

<B>IPC_PRIVATE</B>가

아니고,
<I>key</I>와

연계되어 있는 메세지 큐가 없다면 새로운 메세지 큐가 만들어지며
<B>IPC_CREAT</B>는

<I>msgflg</I>에

명시되어 있다.
(i.e.
<I>msgflg</I><B>&amp;</B><I>IPC_CREAT</I>

는 0이 아니다.)
<P>
<I>msgflg</I>에

존재하는
<B>IPC_CREAT</B>와

<B>IPC_EXCL</B>

필드는
<B><A HREF="http://localhost/cgi-bin/man/man2html?2+open">open</A></B>(2)시스템

호출의 모드 인자에서
<B>O_CREAT</B>와

<B>O_EXCL</B>이

있는 것처럼 메세지 큐의 존재에 대해 같은 역할을 한다.:
만일
<I>msgflg</I>가

<B>IPC_CREAT</B>와

<B>IPC_EXCL</B>이고

<I>key</I>를

위한 메세지 큐가 이미 존재한다면,
<B>msgget</B>

시스템 콜은 실패한다.
<P>

생성시,
<I>msgflg</I>

인자의 하위 9비트는 메세지 큐에 대한 접근 허가권을 정의한다.
이 허가권은
<B><A HREF="http://localhost/cgi-bin/man/man2html?2+open">open</A></B>(2)이나

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+creat">creat</A></B>(2)<B>시스템</B>

콜에 있는 접근 허가권과 같은 형태, 같은 의미를 가진다.
(실행 허가권은 사용되지 않는다.)
<P>

더군다나, 생성하는 동안,
시스템 콜은 다음과 같은 시스템 메세지 큐 데이터 구조체
<B>msqid_ds</B>를

초기화 한다.
<DL COMPACT>
<DT><DD>
<B>msg_perm.cuid</B>와

<B>msg_perm.uid</B>는

호출 프로세스의 유효 사용자-ID로 설정된다.
<DT><DD>
<B>msg_perm.cgid</B>와

<B>msg_perm.gid</B>는

호출 프로세스의 유효 그룹-ID로 설정된다.
<DT><DD>
<B>msg_perm.mode</B>의

하위 9비트는
<I>msgflg</I>의

하위 9비트로 설정된다.
<DT><DD>
<B>msg_qnum</B>,

<B>msg_lspid</B>,

<B>msg_lrpid</B>,

<B>msg_stime</B>

그리고
<B>msg_rtime</B>는

0으로 설정된다.
<DT><DD>
<B>msg_ctime</B>은

현재 시간으로 설정된다.
<DT><DD>
<B>msg_qbytes</B>는

시스템 제한값
<B>MSGMNB</B>으로

설정된다.
<P>
</DL>
<P>

만일 메세지 큐가 이미 존재한다면 접근 허가권을 검증하고,
메시지 큐가 소멸되도록 설정되어 있는지를 알아본다.
<P>
<A NAME="lbAE">&nbsp;</A>
<H2>반환값</H2>

성공시, 반환값은 메세지 큐 식별자(비 음수 정수)가 되며, 그렇지 않으면
에러를 가리키는
<B>errno</B>와<B>함께</B>

<B>-1</B>이

반환된다.
<A NAME="lbAF">&nbsp;</A>
<H2>에러</H2>

실패시,
<B>errno</B>는

다음 값 중 하나로 설정된다.:
<DL COMPACT>
<DT><B>EACCES</B>

<DD>
<I>key</I>에

해당 하는 메세지 큐가 존재하지만 호출 프로세스가 큐에 대한 접근 허가권을 가지고 있지 않다.
<DT><B>EEXIST</B>

<DD>
<B>key</B>에

해당하는 메세지 큐가 존재하며
<I>msgflg</I>가

<B>IPC_CREAT</B>와

<B>IPC_EXCL</B>를

모두 가지고 있다.
<DT><B>EIDRM</B>

<DD>
메세지 큐가 제거되도록 표시되어 있다.
<DT><B>ENOENT</B>

<DD>
<I>key</I>에

해당하는 메세지 큐가 존재하지 않으며
<I>msgflg</I>에

<B>IPC_CREAT</B>가

존재하지 않는다.
<DT><B>ENOMEM</B>

<DD>
메세지 큐가 만들어 졌지만 시스템은 새로운 데이터 구조를 위한 메모리 공간이
충분하지 않다.
<DT><B>ENOSPC</B>

<DD>
메세지 큐가 만들어 졌지만 시스템 제한 값인 메세지 큐의 최대 수
(<B>MSGMNI</B>)를

초과했다.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>주의</H2>

<B>IPC_PRIVATE</B>는

플래그 필드가 아니고
<B>key_t</B>

타입이다.
이 특별한 값이
<I>key</I>에

사용된다면, 시스템 콜은
<I>msgflg</I>의

하위 8비트를 제외한 모든 것을 무시한다.
그리고 성공시 새로운 메세지 큐를 생성한다.
<P>

다음은
<B>msgget</B>

함수에 영향을 주는 메세지 큐 자원에 대한 시스템 제한값이다:
<DL COMPACT>
<DT><B>MSGMNI</B>

<DD>
메세지 큐의 시스템 최대 수 : 정책에 의존적이다.
</DL>
<A NAME="lbAH">&nbsp;</A>
<H2>버그</H2>

<B>IPC_PRIVATE</B>의

사용은 할당된 메세지 큐에 접근하는 다른 프로세스를 실제로 막지 못한다.
<P>

파일에서처럼 메세지 큐에 배타적 접근을 보장하도록 프로세스를 위한 내부적
방법은 없다.
단지
<I>msgflg</I>에

<B>IPC_CREAT</B>와

<B>IPC_EXCL</B>를

명시하는 것이 새로운 메세지 큐가 생성되었다는 것을 보장하지만(성공시)
이것이 메세지 큐에 대한 배타적 접근을 암시하는 것은 아니다.
<A NAME="lbAI">&nbsp;</A>
<H2>호환</H2>

SVr4, SVID.  SVr4 는 EIDRM 에러 코드를 문서화하지 않았다.
<A NAME="lbAJ">&nbsp;</A>
<H2>관련 항목</H2>

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+ftok">ftok</A></B>(3),

<B><A HREF="http://localhost/cgi-bin/man/man2html?5+ipc">ipc</A></B>(5),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+msgctl">msgctl</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+msgsnd">msgsnd</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+msgrcv">msgrcv</A></B>(2)

<A NAME="lbAK">&nbsp;</A>
<H2>번역</H2>

정강훈 &lt;<A HREF="mailto:skyeyes@soback.kornet.net">skyeyes@soback.kornet.net</A>&gt; 2000년 6월 19일
<BR>

한글 Manpage 프로젝트 (<A HREF="http://man.kldp.org">http://man.kldp.org</A>) 2005년 2월 15일
<P>
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">이름</A><DD>
<DT><A HREF="#lbAC">사용법</A><DD>
<DT><A HREF="#lbAD">설명</A><DD>
<DT><A HREF="#lbAE">반환값</A><DD>
<DT><A HREF="#lbAF">에러</A><DD>
<DT><A HREF="#lbAG">주의</A><DD>
<DT><A HREF="#lbAH">버그</A><DD>
<DT><A HREF="#lbAI">호환</A><DD>
<DT><A HREF="#lbAJ">관련 항목</A><DD>
<DT><A HREF="#lbAK">번역</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 11:22:56 GMT, February 15, 2005
</BODY>
</HTML>
