<HTML><HEAD><TITLE>Manpage of OPEN</TITLE>
</HEAD><BODY>
<H1>OPEN</H1>
Section: System calls (2)<BR>Updated: June 3, 1999<BR><A HREF="#index">Index</A>
<BR />
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>이름</H2>

open, creat - 파일이나 장치를 열고 생성한다.
<A NAME="lbAC">&nbsp;</A>
<H2>사용법</H2>

<PRE>
<B>#include &lt;<A HREF="file:/usr/include/sys/types.h">sys/types.h</A>&gt;</B>
<B>#include &lt;<A HREF="file:/usr/include/sys/stat.h">sys/stat.h</A>&gt;</B>
<B>#include &lt;<A HREF="file:/usr/include/fcntl.h">fcntl.h</A>&gt;</B>

<B>int open(const char *</B><I>pathname</I><B>, int </B><I>flags</I><B>);</B>
<B>int open(const char *</B><I>pathname</I><B>, int </B><I>flags</I><B>, mode_t </B><I>mode</I><B>);</B>
<B>int creat(const char *</B><I>pathname</I><B>, mode_t </B><I>mode</I><B>);</B>
</PRE>

<A NAME="lbAD">&nbsp;</A>
<H2>설명</H2>

<B>open()</B>

시스템 호출은 파일 디스크립터에서 경로명 전환에 사용된다. 호출이 성공하면, 
반환되는 파일 디스크립터는 프로세스를 위해 열리지 않는다. 이 호출은 모든 다른 
프로세스가 공유하지 않는 새로운 파일을 생성한다.

<I>flags</I>

는 파일을 read-only, write-only, read/write로 여는 요청을 하는 
<B>O_RDONLY</B>, <B>O_WRONLY</B> or <B>O_RDWR</B>

중 하나이다.

<I>flags</I>

는 또한 다음중 하나이상을 가진
bitwise-<I>or</I>'d

일런지 모른다:
<DL COMPACT>
<DT><B>O_CREAT</B>

<DD>
파일이 없으면 생성될것이다.
<DT><B>O_EXCL</B>

<DD>
When used with
<B>O_CREAT</B>

를 사용할 때, 파일이 이미 존재한다면 에러나 파일을 여는데 실패할 것이다. 
<B>O_EXCL</B>

는 NFS 파일 시스템을 깬다. 잠금파일을 사용하는 automic파일 잠금을 실행하기위한 솔루션은 
같은 파일 시스템에 특정파일을 생성하기 위함이다.
<DT><B>O_NOCTTY</B>

<DD>
<I>경로명</I>

이 터미널 장치를 언급한다면 
<B><A HREF="http://localhost/cgi-bin/man/man2html?4+tty">tty</A></B>(4)

를 본다. 
<DT><B>O_TRUNC</B>

<DD>
파일이 이미 존재한다면 그것은 생략될 것이다.
<DT><B>O_APPEND</B>

<DD>
파일이 추가모드에 열려있다. 각각
<B>기록</B>

되기 전에 파일포인터는 
<B>lseek</B>

가 있는 것처럼 파일의 끝에 위치한다.
<B>O_APPEND</B>

는 적어도 하나 이상의 프로세스가 파일에 데이타를 추가한다면 NFS파일 시스템상에 
변질(correpted)된 파일을 이끈다. 이것은 NFS가 파일에 추가를 지원하지 않기때문이다. 
그래서 클라이언트 커널은 그것을 시뮬레이트한다. 
<DT><B>O_NONBLOCK</B> or <B>O_NDELAY</B>

<DD>
파일은 비블록 모드로 열린다. 
<DT><B>O_SYNC</B>

<DD>
파일은 입출력 동기화를 위해 열린다. 파일 디스크립터 결과 모든
<B>write</B>s

는 데이타가 물리적으로 하드웨어로 기록될 때까지 호출 프로세스를 블록화 할 것이다.
<I>아래의 RESTRICTIONS를 본다.</I>

<DT><B>O_NOFOLLOW</B>

<DD>
경로명이 심볼릭 링크라면, 파일열기는 실패한다. 이것은 리눅스 버전 2.1.126에 추가된 
freeBSD확장이다. 경로명의 초기 구성인 심볼릭 링크는 계속 따를것이다. glibc2.0.100의 
헤더와 후에 이 플래그의 정의를 포함한다; 커널 2.1.126이전에서 사용한다면 무시할 것이다.
<DT><B>O_DIRECTORY</B>

<DD>
<I>경로명</I>이 디렉토리가 아니라면, 파일열기는 실패할 것이다. 이 플래그는 리눅스의 
특징이고, <B><A HREF="http://localhost/cgi-bin/man/man2html?3+opendir">opendir</A></B>(3)가 FIFO나 테입장치에 호출된다면 서비스의 거부문제를 피하기 위해 
리눅스 커널 버전 2.1.126에 추가되었다. 그러나 <B>opendir</B>는 외부에서 사용될 수 없다.
<DT><B>O_LARGEFILE</B>

<DD>
대용량 파일 시스템을 지원하는 32비트 시스템은 31비트로는 열수 없는 크기의 파일을 사용할 수 있다.
리눅스 커널은 이것을 아직은 지원하지 못하지만, glibc 2.1에서 테스팅되었다.
</DL>
<P>

몇몇 이러한 옵션 플래그는 파일이 열린후 사용하는
<B>fcntl</B>

가 바뀔 수 있다.

<I>모드</I>

는 새로운 파일이 생성되면 사용권한을 지정한다. 대개 프로세스의 
<B>umask</B>

로 수정한다: 생성된 파일의 권한은 
<B>(mode &amp; ~umask)</B>

이다.
<P>

다음의 심볼릭 상수는 
<I>모드</I>

를 위해 제공된다:
<DL COMPACT>
<DT><B>S_IRWXU</B>

<DD>
00700 사용자(파일 소유자)는 읽기, 쓰기, 실행권한이 있다.
<DT><B>S_IRUSR (S_IREAD)</B>

<DD>
00400 사용자는 읽기 권한이 있다.
<DT><B>S_IWUSR (S_IWRITE)</B>

<DD>
00200 사용자는 쓰기 권한이 있다.
<DT><B>S_IXUSR (S_IEXEC)</B>

<DD>
00100 사용자는 실행 권한이 있다.
<DT><B>S_IRWXG</B>

<DD>
00070 그룹은 읽기, 쓰기, 실행 권한이 있다.
<DT><B>S_IRGRP</B>

<DD>
00040 그룹은 읽기 권한이 있다.
<DT><B>S_IWGRP</B>

<DD>
00020 그룹은 쓰기 권한이 있다.
<DT><B>S_IXGRP</B>

<DD>
00010 그룹은 실행 권한이 있다.
<DT><B>S_IRWXO</B>

<DD>
00007 기타사용자는 읽기, 쓰기, 실행 권한이 있다.
<DT><B>S_IROTH</B>

<DD>
00004 기타사용자는 읽기 권한이 있다.
<DT><B>S_IWOTH</B>

<DD>
00002 기타사용자는 쓰기 권한이 있다.
<DT><B>S_IXOTH</B>

<DD>
00001 기타사용자는 실행 권한이 있다.
<I>모드</I>

는 항상 
<B>O_CREAT</B>

가 
<I>플래그</I>

일때 지정되어야만하고, 그밖에는 무시한다.

<B>생성</B>

은
<B>O_CREAT|O_WRONLY|O_TRUNC</B>

와 일치하는 
<I>플래그</I>

를 가진 
<B>파일열기</B>

와 일치한다.
</DL>
<A NAME="lbAE">&nbsp;</A>
<H2>반환값</H2>

<B>열기와</B>생성<B></B>

은 에러가 나면 새로운 파일 디스크립터를 반환하거나 -1을 반환한다. 이런경우 
<I>errno</I>

는 적절히 설정된다.
Note that
<B>열기</B>

는 장치파일을 열순 있지만, 
<B>생성</B>

은 장치파일을 생성 할 수 없는 것을 주지한다. 대신 
<B><A HREF="http://localhost/cgi-bin/man/man2html?2+mknod">mknod</A></B>(2)

을 사용한다.
<P>

UID 맵핑이 가능한 NFS 파일 시스템에서 <B>열기</B>는 파일 디스크립터를 반환하지만, 
<B><A HREF="http://localhost/cgi-bin/man/man2html?2+read">read</A></B>(2)는 거부된다. 이것은 클라이언트가 권한검사에 의해 <B>열기</B>를 실행하지만
UID 맵핑은 서버에 의해 실행할 수 있기 때문이다.


<A NAME="lbAF">&nbsp;</A>
<H2>에러</H2>

<DL COMPACT>
<DT><B>EEXIST</B>

<DD>
<I>경로명</I>

이 이미 존재하고, 
<B>O_CREAT</B> and <B>O_EXCL</B>

가 사용된다.
<DT><B>EISDIR</B>

<DD>
<I>경로명</I>

이 디렉토리를 참조하고, 접근은 복잡한 기록을 요구했다.
<DT><B>EACCES</B>

<DD>
요청한 파일 접근은 거부되거나 
<I>경로명</I>

의 디렉토리중 하나가 실행권한을 찾을 수 없거나 파일이 아직 존재하지 않고 부모디렉토리 접근이 거
부됐다.
<DT><B>ENAMETOOLONG</B>

<DD>
<I>경로명이</I>너무길다.

<DT><B>ENOENT</B>

<DD>
A directory component in
<I>경로명</I>

의 디렉토리가 없거나 심볼릭 링크가 깨졌다.
<DT><B>ENOTDIR</B>

<DD>
A component used as a directory in
<I>경로명</I>

에 디렉토리로써 사용되는 것이 없다. 사실 디렉토리나 <B>O_DIRECTORY</B>가 지정되었고 
<I>경로명</I>

이 디렉토리가 아니다.
<DT><B>ENXIO</B>

<DD>
O_NONBLOCK | O_WRONLY가 설정되고, 지정한 파일이 FIFO이고 어떠한 프로세스도 읽기위해 열린 파일이 없다.
또는, 파일이 장치파일이고 일치하는 장치가 없다.
<DT><B>ENODEV</B>

<DD>
<I>경로명</I>

이 장치파일을 참조하고, 일치하는 장치가 없다.
<DT><B>EROFS</B>

<DD>
<I>경로명</I>

이 read-only 파일시스템의 파일을 참조하고 쓰기접근이 요청됐다.
<DT><B>ETXTBSY</B>

<DD>
<I>경로명</I>

이 현재 실행중인 실행이미지파일을 참조하고 쓰기권한 접근이 요청되었다.
<DT><B>EFAULT</B>

<DD>
<I>경로명이</I>당신이<I>접근</I>할<I>수</I>있는<I>주소공간</I>밖을<I>가리킨다.</I>

<DT><B>ELOOP</B>

<DD>
심볼릭링크가 너무 많다.
<I>경로명</I>

이나 <B>O_NOFOLLOW</B>가 지정되었지만 
<I>경로명</I>

이 심볼릭 링크이다.
<DT><B>ENOSPC</B>

<DD>
<I>경로명</I>

이 생성되었지만 장치가 
<I>경로명</I>

이 포함하는 장치가 새로운 파일을 위한 공간이 없다.
<DT><B>ENOMEM</B>

<DD>
커널 메모리가 부족하다.
<DT><B>EMFILE</B>

<DD>
프로세스가 이미 파일열기의 최대값에 찼다.
<DT><B>ENFILE</B>

<DD>
파일열기의 총합제한에 도달했다.
</DL>
<A NAME="lbAG">&nbsp;</A>
<H2>호환</H2>

SVr4, SVID, POSIX, X/OPEN, BSD 4.3
<A NAME="lbAH">&nbsp;</A>
<H2>제한</H2>

POSIX은 <B>O_SYNC</B>, <B>O_DSYNC</B> 와 <B>O_RSYNC</B>에 일치하는 입출력 동기화의 세가지 다른 변수를 제공한다. 
현재(2.1.130) 이런것들은 리눅스에서 모두 같은 뜻이다.
<A NAME="lbAI">&nbsp;</A>
<H2>관련 항목</H2>

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+read">read</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+write">write</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+fcntl">fcntl</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+close">close</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+link">link</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+mknod">mknod</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+mount">mount</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+stat">stat</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+umask">umask</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+unlink">unlink</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?2+socket">socket</A></B>(2),

<B><A HREF="http://localhost/cgi-bin/man/man2html?3+fopen">fopen</A></B>(3),

<B><A HREF="http://localhost/cgi-bin/man/man2html?4+fifo">fifo</A></B>(4)

<A NAME="lbAJ">&nbsp;</A>
<H2>역자</H2>

ASPLINUX&lt;<A HREF="mailto:man@asp-linux.co.kr">man@asp-linux.co.kr</A>&gt;, 2000년 7월 29
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">이름</A><DD>
<DT><A HREF="#lbAC">사용법</A><DD>
<DT><A HREF="#lbAD">설명</A><DD>
<DT><A HREF="#lbAE">반환값</A><DD>
<DT><A HREF="#lbAF">에러</A><DD>
<DT><A HREF="#lbAG">호환</A><DD>
<DT><A HREF="#lbAH">제한</A><DD>
<DT><A HREF="#lbAI">관련 항목</A><DD>
<DT><A HREF="#lbAJ">역자</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 08:07:00 GMT, March 25, 2004
</BODY>
</HTML>
